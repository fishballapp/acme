name: Integration

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  deno:
    name: Deno
    uses: ./.github/workflows/_test-with-pebble.yaml
    with:
      test_command: deno task test:integration
  node:
    name: Node
    uses: ./.github/workflows/_test-with-pebble.yaml
    with:
      test_command: deno task build:npm:integration
